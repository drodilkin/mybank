<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Ultra Demo Bank</title>

<style>

body{
margin:0;
font-family:system-ui;
background:#0f172a;
color:white;
}

.container{
max-width:420px;
margin:auto;
padding:20px;
}

.card{
background:linear-gradient(135deg,#1e293b,#020617);
padding:20px;
border-radius:20px;
margin-bottom:15px;
box-shadow:0 10px 25px rgba(0,0,0,.4);
}

.bank-card{
background:linear-gradient(135deg,#22c55e,#16a34a);
border-radius:18px;
padding:20px;
color:white;
margin-bottom:15px;
}

input{
width:100%;
padding:12px;
margin-top:10px;
border-radius:10px;
border:none;
font-size:16px;
}

button{
width:100%;
padding:12px;
margin-top:10px;
border-radius:10px;
border:none;
background:#22c55e;
color:white;
font-size:16px;
cursor:pointer;
}

h2,h3{
margin-top:0;
}

#bank{display:none}

.history-item{
background:#020617;
padding:10px;
border-radius:10px;
margin-top:5px;
font-size:14px;
}

.topbar{
display:flex;
justify-content:space-between;
align-items:center;
margin-bottom:15px;
}

.small-btn{
width:auto;
padding:6px 12px;
background:#334155;
}

.balance{
font-size:28px;
font-weight:bold;
}

</style>

</head>
<body>

<div class="container">

<h2>üè¶ Ultra Demo Bank</h2>

<div id="login" class="card">
<h3>Login</h3>
<input id="email" placeholder="Email">
<input id="password" type="password" placeholder="Password">
<button onclick="login()">Login</button>
</div>

<div id="bank">

<div class="topbar">
<h3>Dashboard</h3>
<button class="small-btn" onclick="logout()">Logout</button>
</div>

<div class="bank-card">
<div>üí≥ Demo Card</div>
<div id="card"></div>
<div class="balance" id="balance"></div>
</div>

<div class="card">
<h3>üí∏ Transfer</h3>
<input id="to" placeholder="Receiver email">
<input id="amount" placeholder="Amount">
<button onclick="transfer()">Send Money</button>
</div>

<div class="card">
<h3>üìú Transactions</h3>
<div id="history"></div>
<button onclick="loadHistory()">Refresh History</button>
</div>

</div>

</div>

<script>

const API="https://script.google.com/macros/s/AKfycbw5rnGgWUFlumk3D82maoKeDYfqDQyn-SkKMtAL7BErvZMtXbKZ9Y_QKerYnPYvWEki7g/exec";
let user=null;

window.onload=()=>{
const saved=localStorage.getItem("bankUser");
if(saved){
user=JSON.parse(saved);
openBank();
refreshBalance();
loadHistory();
setInterval(refreshBalance,5000);
}
}

function openBank(){
login.style.display="none";
bank.style.display="block";
updateUI();
}

function updateUI(){
balance.innerText="‚ÇΩ "+user.balance;
card.innerText=user.card;
}

async function login(){

const res=await fetch(API,{
method:"POST",
body:JSON.stringify({
action:"login",
email:email.value,
password:password.value
})
});

const data=await res.json();

if(data.status==="success"){
user=data;
localStorage.setItem("bankUser",JSON.stringify(user));
openBank();
loadHistory();
setInterval(refreshBalance,5000);
}else{
alert("Wrong login");
}
}

async function refreshBalance(){

const res=await fetch(API,{
method:"POST",
body:JSON.stringify({
action:"balance",
email:user.email
})
});

const data=await res.json();

if(data.status==="success"){
user.balance=data.balance;
localStorage.setItem("bankUser",JSON.stringify(user));
updateUI();
}
}

async function transfer(){

const res=await fetch(API,{
method:"POST",
body:JSON.stringify({
action:"transfer",
from:user.email,
to:to.value,
amount:amount.value
})
});

const data=await res.json();

if(data.status==="success"){
user.balance=data.newBalance;
localStorage.setItem("bankUser",JSON.stringify(user));
updateUI();
loadHistory();
alert("Transfer complete");
}else{
alert(data.status);
}
}

async function loadHistory(){

const res=await fetch(API,{
method:"POST",
body:JSON.stringify({
action:"history"
})
});

const data=await res.json();

if(data.status==="success"){

history.innerHTML="";

data.data.reverse().forEach(row=>{

const div=document.createElement("div");
div.className="history-item";
div.innerText=row[1]+" ‚Üí "+row[2]+" : "+row[3];
history.appendChild(div);

});
}
}

function logout(){
localStorage.removeItem("bankUser");
location.reload();
}

</script>

</body>
</html>
