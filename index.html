<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>PayBank</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
  --bg:#0c0c0f;
  --card:#1a1a1f;
  --soft:#24242b;
  --accent:#ffdd2d;
  --text:#fff;
  --muted:#9b9ba3;
}

*{box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif}

body{
  margin:0;
  background:var(--bg);
  color:var(--text);
}

.hidden{display:none}

/* ===== LOGIN ===== */
.login{
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  padding:20px;
}

.login-card{
  width:100%;
  max-width:380px;
  background:var(--card);
  border-radius:24px;
  padding:24px;
}

.login-card h1{
  text-align:center;
  margin-bottom:20px;
}

input{
  width:100%;
  padding:14px;
  margin-top:12px;
  border:none;
  border-radius:14px;
  background:var(--soft);
  color:#fff;
  font-size:16px;
}

button{
  width:100%;
  padding:14px;
  margin-top:16px;
  border:none;
  border-radius:16px;
  background:var(--accent);
  font-weight:600;
  font-size:16px;
  cursor:pointer;
}

.message{
  margin-top:12px;
  text-align:center;
  color:#ff6b6b;
}

/* ===== DASHBOARD ===== */
.app{
  min-height:100vh;
  padding:20px;
}

.header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:20px;
}

.header h2{margin:0}

.card{
  background:var(--card);
  border-radius:24px;
  padding:20px;
  margin-bottom:16px;
}

.balance{
  font-size:34px;
  font-weight:600;
  margin-top:6px;
}

.actions{
  display:flex;
  gap:12px;
  margin-bottom:16px;
}

.action{
  flex:1;
  background:var(--soft);
  border-radius:18px;
  padding:14px;
  text-align:center;
  font-size:14px;
  cursor:pointer;
}

.transfer input, .transfer select{
  background:var(--soft);
}

.history{
  margin-top:10px;
}

.history-item{
  padding:10px 0;
  border-bottom:1px solid #2a2a30;
  font-size:14px;
}

.plus{color:#2ecc71}
.minus{color:#ff6b6b}

.logout{
  margin-top:20px;
  background:#2a2a30;
  color:#fff;
}
</style>
</head>

<body>

<!-- LOGIN -->
<div class="login" id="loginScreen">
  <div class="login-card">
    <h1>PayBank</h1>
    <input id="email" placeholder="Email">
    <input id="password" type="password" placeholder="–ü–∞—Ä–æ–ª—å">
    <button onclick="login()">–í–æ–π—Ç–∏</button>
    <div id="loginMsg" class="message"></div>
  </div>
</div>

<!-- APP -->
<div class="app hidden" id="appScreen">

  <div class="header">
    <h2 id="userName">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</h2>
    <span style="color:var(--muted)">PayBank</span>
  </div>

  <div class="card">
    <div style="color:var(--muted)">–û—Å–Ω–æ–≤–Ω–æ–π —Å—á—ë—Ç</div>
    <div class="balance" id="balance">0 ‚ÇΩ</div>
  </div>

  <div class="actions">
    <div class="action">üí∏ –ü–µ—Ä–µ–≤–æ–¥</div>
    <div class="action">üìú –ò—Å—Ç–æ—Ä–∏—è</div>
    <div class="action">‚öôÔ∏è</div>
  </div>

  <div class="card transfer">
    <select id="toUser"></select>
    <input id="amount" type="number" placeholder="–°—É–º–º–∞">
    <button onclick="transfer()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
  </div>

  <div class="card">
    <h3 style="margin-top:0">–ò—Å—Ç–æ—Ä–∏—è</h3>
    <div class="history" id="history"></div>
  </div>

  <button class="logout" onclick="logout()">–í—ã–π—Ç–∏</button>

</div>

<script>
const API_URL = '–í–°–¢–ê–í–¨_–°–Æ–î–ê_API_URL';

const USERS = [
  {name:'–†–æ–º–∞–Ω',email:'romankisel@mail.ru'},
  {name:'–ò–ª—å—è—Å',email:'ilyasvaliev@mail.ru'},
  {name:'–ê—Ä—Ç–µ–º',email:'artemant@mail.ru'},
  {name:'–ü—Ä–æ—Ö–æ—Ä',email:'prokhormart@mail.ru'}
];

let currentUser='';

/* LOGIN */
async function login(){
  const emailVal=email.value.toLowerCase();
  const pass=password.value;

  const res=await fetch(API_URL,{
    method:'POST',
    body:JSON.stringify({action:'login',email:emailVal,password:pass})
  });
  const data=await res.json();

  if(!data.success){
    loginMsg.textContent='–ù–µ–≤–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ';
    return;
  }

  currentUser=emailVal;
  userName.textContent=USERS.find(u=>u.email===emailVal)?.name || emailVal;
  balance.textContent=data.balance+' ‚ÇΩ';

  fillUsers();
  loadHistory();

  loginScreen.classList.add('hidden');
  appScreen.classList.remove('hidden');
}

function fillUsers(){
  toUser.innerHTML='<option value="">–ö–æ–º—É</option>';
  USERS.forEach(u=>{
    if(u.email!==currentUser){
      const o=document.createElement('option');
      o.value=u.email;
      o.textContent=u.name;
      toUser.appendChild(o);
    }
  });
}

/* TRANSFER */
async function transfer(){
  const to=toUser.value;
  const amountVal=Number(amount.value);

  if(!to||amountVal<=0) return;

  const res=await fetch(API_URL,{
    method:'POST',
    body:JSON.stringify({action:'transfer',from:currentUser,to,amount:amountVal})
  });
  const data=await res.json();

  if(data.success){
    balance.textContent=data.balance+' ‚ÇΩ';
    amount.value='';
    loadHistory();
  }
}

/* HISTORY */
async function loadHistory(){
  const res=await fetch(API_URL,{
    method:'POST',
    body:JSON.stringify({action:'history',email:currentUser})
  });
  const data=await res.json();

  history.innerHTML='';
  data.history.reverse().forEach(h=>{
    const d=document.createElement('div');
    d.className='history-item '+(h.amount.startsWith('+')?'plus':'minus');
    d.textContent=`${h.time} ‚Äî ${h.text} ${h.amount}`;
    history.appendChild(d);
  });
}

function logout(){
  location.reload();
}
</script>

</body>
</html>
