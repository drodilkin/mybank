<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>PayBank</title>

<style>
body{
  margin:0;
  height:100vh;
  background:
    radial-gradient(600px 300px at 20% 10%, #1c1f35, transparent),
    radial-gradient(600px 300px at 80% 90%, #151628, transparent),
    #05060a;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto;
  color:white;
}

.center{
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
}

.panel{
  width:400px;
  padding:32px;
  border-radius:26px;
  background:rgba(20,21,32,.7);
  backdrop-filter:blur(18px);
  box-shadow:0 40px 120px rgba(0,0,0,.8);
}

h2{
  margin:0 0 20px;
}

input,button{
  width:100%;
  padding:14px;
  margin-top:14px;
  border:none;
  border-radius:14px;
  font-size:15px;
}

input{
  background:#1e1f28;
  color:white;
}

button{
  background:#ffd600;
  font-weight:600;
}

.balance{
  margin-top:20px;
  padding:20px;
  border-radius:20px;
  background:linear-gradient(135deg,#1e2030,#0f1018);
  font-size:22px;
}
</style>
</head>

<body>

<div class="center" id="login">
  <div class="panel">
    <h2>PayBank</h2>
    <input id="email" placeholder="Email">
    <input id="password" placeholder="Пароль" type="password">
    <button onclick="login()">Войти</button>
  </div>
</div>

<div class="center" id="app" style="display:none">
  <div class="panel">
    <h2>Добро пожаловать</h2>
    <div class="balance" id="balance"></div>
    <button onclick="logout()" style="margin-top:20px">Выйти</button>
  </div>
</div>

<script>
const API = 'https://script.google.com/macros/s/AKfycbyEhfevhC7fpqcI6Ljk9G2u2--NVtvE9G2IUo8y-3IHAT2YYWzGAP1cl1-ty-QTaAURiA/exec';
let me = null;

function login(){
  fetch(API,{
    method:'POST',
    headers:{
      'Content-Type':'application/json'
    },
    body: JSON.stringify({
      action:'login',
      email: email.value,
      password: password.value
    })
  })
  .then(r => r.text())
  .then(t => {
    console.log('API:', t);
    const d = JSON.parse(t);

    if(!d.ok){
      alert('Неверные данные');
      return;
    }

    me = d;
    login.style.display='none';
    app.style.display='flex';
    balance.innerText = d.balance + ' ₽';
  });
}

function logout(){
  location.reload();
}
</script>

</body>
</html>
